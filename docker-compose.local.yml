version: "3"
services:
  admin: # admin panel
    build:
      context: ./
      dockerfile: Admin.Dockerfile
    ports:
      - 9002:80
    environment: # not in use until official introduction of IConfiguration in Blazor by Microsoft
      - API_ENDPOINT=http://web.api/ # to provide production API_ENDPOINT use appsettings.json in Admin/

  public:  # front-end
    build:
      context: ./
      dockerfile: Public.Dockerfile
    ports:
      - 9001:80
    environment:
      - API_ENDPOINT=http://web.api/

  api:  # web api
    build:
      context: ./
      dockerfile: Api.Dockerfile
    ports:
      - 9000:80
    env_file:
      - ./app.env